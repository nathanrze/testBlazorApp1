@code {
    private List<Message> Messages = new()
    {
        new Message { Sender = "Alice", Content = "Salut !", Timestamp = DateTime.Now, Platform = "WhatsApp" },
        new Message { Sender = "Bob", Content = "Comment ça va ?", Timestamp = DateTime.Now.AddMinutes(-5), Platform = "Telegram" }
    };

    private Message? EditingMessage = null;
    private string SearchPlatform = "";

    private void StartEditing(Message message)
    {
        EditingMessage = message;
    }

    private void SaveEdit()
    {
        EditingMessage = null;
    }

    private void DeleteMessage(Message message)
    {
        Messages.Remove(message);
    }

    private IEnumerable<Message> FilteredMessages => string.IsNullOrWhiteSpace(SearchPlatform)
        ? Messages
        : Messages.Where(m => m.Platform.Contains(SearchPlatform, StringComparison.OrdinalIgnoreCase));
}

<h3>Messages Importés</h3>

<!-- Filtre par plateforme -->
<div class="mb-3">
    <label>Filtrer par plateforme :</label>
    <input @bind="SearchPlatform" class="form-control" placeholder="WhatsApp, Telegram..." />
</div>

<table class="table">
    <thead>
        <tr>
            <th>Expéditeur</th>
            <th>Contenu</th>
            <th>Date</th>
            <th>Plateforme</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var message in FilteredMessages)
        {
            <tr>
                <td>@message.Sender</td>
                <td>
                    @if (EditingMessage == message)
                    {
                        <input @bind="message.Content" class="form-control" />
                    }
                    else
                    {
                        @message.Content
                    }
                </td>
                <td>@message.Timestamp</td>
                <td>@message.Platform</td>
                <td>
                    @if (EditingMessage == message)
                    {
                        <button class="btn btn-success" @onclick="SaveEdit">💾 Enregistrer</button>
                    }
                    else
                    {
                        <button class="btn btn-primary" @onclick="() => StartEditing(message)">✏ Modifier</button>
                        <button class="btn btn-danger" @onclick="() => DeleteMessage(message)">🗑 Supprimer</button>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
